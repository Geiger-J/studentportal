# IB Computer Science Internal Assessment — Record of Tasks

> **Product:** Student Peer-Tutoring Portal  
> **Derived strictly from implemented features, modules, and typical development workflow observed in the repository.**

---

## SECTION 1: DETECTED FEATURE GROUPS

- **Authentication & registration** — form-based login, BCrypt password hashing, auto-authentication after registration (`AuthController`, `SecurityConfig`, `UserService`)
- **Role-based access control** — STUDENT/ADMIN roles determined automatically from email address pattern; URL and method-level security rules (`SecurityConfig`, `User.java`)
- **User profile management** — year group, exam board, subject selection, and availability timeslot collection; profile-completion gating before request creation (`ProfileController`, `User.java`)
- **Tutoring request lifecycle** — TUTOR/TUTEE request creation with subject and timeslot selection; status machine PENDING → MATCHED → DONE / CANCELLED (`RequestController`, `Request.java`, `RequestService`)
- **Weighted bipartite matching algorithm** — JGraphT-based maximum-weight matching on (request, timeslot) vertices with hard constraints (subject, year range) and edge weights (exam board, year proximity) (`MatchingService`)
- **Scheduled automatic status transition** — background task runs every 60 seconds and moves MATCHED requests to DONE when their timeslot end-time has elapsed (`RequestStatusScheduler`, `Timeslots`, `TimeService`)
- **Admin dashboard and controls** — summary statistics, request filtering, manual trigger of matching, request cancellation, request archival, user password reset, and user deletion (`AdminController`, `RequestRepository`)
- **Database entities and seeding** — three JPA entities (`User`, `Request`, `Subject`) with join tables for subjects and availability; ten academic subjects pre-seeded on first startup (`DataSeeder`, `SubjectService`)

---

## SECTION 2: RECORD OF TASKS TABLE

| DATE | TASK DESCRIPTION | CRITERION STAGE | PLANNED ACTION | PLANNED OUTCOME | ACTUAL OUTCOME | TIME ESTIMATE (HOURS) |
|------|-----------------|-----------------|---------------|-----------------|----------------|-----------------------|
| 05 Sep 2025 | Define system scope and data requirements | Plan | Identify the entities, relationships, and core workflows needed for a peer-tutoring portal | Clear list of entities (User, Request, Subject), roles, and user journeys | Entities, role model, and five key workflows (register, profile, request, match, view) confirmed and agreed | 2 |
| 08 Sep 2025 | Plan algorithmic matching approach and tooling | Plan | Decide how to implement pairing logic — evaluate brute-force, greedy, and graph-based approaches; choose a library | Chosen algorithm approach and justification for using a graph-matching library | Weighted bipartite matching selected; JGraphT library chosen for its `MaximumWeightBipartiteMatching` implementation; dependency added to `pom.xml` | 2 |
| 10 Sep 2025 | Design entity-relationship model | Design | Sketch the database schema for User, Request, and Subject, including join tables for subjects and availability | Completed ER diagram with all fields, primary keys, and relationship types | Schema finalised; `user_subjects` and `user_availability` join/element-collection tables added to reflect many-to-many and collection relationships | 3 |
| 15 Sep 2025 | Design timeslot representation system | Design | Define a canonical set of 35 timeslot codes (MON_P1 … FRI_P7) with human-readable labels and end-time metadata | Timeslot utility class with all codes, a label map, and an end-time lookup | `Timeslots.java` implemented with `ALL_CODES_SET`, `LABELS` map, `filterValid()`, and `getTimeslotEndTime()`; covers all five days and seven periods | 2 |
| 22 Sep 2025 | Set up Spring Boot project and database configuration | Develop | Initialise the Maven project with Spring Boot, Spring Security, Thymeleaf, JPA, and H2/PostgreSQL dependencies | Working application skeleton with H2 in-memory database for development | Project created with `pom.xml` including JGraphT, Thymeleaf Security Extras, and dual-profile properties (`application.properties` for H2, `application-local.properties` for PostgreSQL) | 3 |
| 01 Oct 2025 | Implement User entity and registration flow | Develop | Create the `User` JPA entity with all profile fields and implement the registration controller and service | Users can register via a form and accounts are persisted to the database | Registration working end-to-end; BCrypt hashing applied via `PasswordConfig`; role auto-determined from email pattern in `UserService.determineRole()` | 4 |
| 08 Oct 2025 | Implement Spring Security and role-based access control | Develop | Configure `SecurityFilterChain` to restrict `/admin/**` to ADMIN and `/dashboard`, `/requests/**` to STUDENT | URL-based access control enforced with appropriate redirects on denial | `SecurityConfig` and `CustomAuthenticationSuccessHandler` implemented; `RoleRedirectAccessDeniedHandler` added for graceful denial redirects; `@PreAuthorize` annotations added to controllers | 3 |
| 14 Oct 2025 | Implement profile-completion form and validation | Develop | Build the profile controller and Thymeleaf form for year group, exam board, subject selection, and availability | Students can save a complete profile; incomplete profiles are redirected before request creation | Profile saving working; exam-board restriction for Year 12–13 enforced in `ProfileController`; `profileComplete` flag derived from year, subjects, and availability presence | 4 |
| 20 Oct 2025 | Design matching algorithm approach | Design | Research and select an algorithm for pairing TUTOR and TUTEE requests; define hard constraints and scoring criteria | Algorithm design document with edge-weight formula and constraint list | Weighted bipartite matching chosen using JGraphT `MaximumWeightBipartiteMatching`; edge weight formula (base 100, +50 exam board, up to +30 year proximity) documented and later implemented in `MatchingService` | 3 |
| 27 Oct 2025 | Implement tutoring request creation and validation | Develop | Build the request controller and service for creating TUTOR/TUTEE requests with subject and timeslot selection | Students can submit requests; duplicate and empty-timeslot submissions are rejected | `RequestController` and `RequestService` implemented; `hasActiveRequest()` prevents duplicates; empty-timeslot guard added; request immediately appears on dashboard with PENDING status | 4 |
| 04 Nov 2025 | Implement weighted bipartite matching algorithm | Develop | Implement `MatchingService` using JGraphT to build a request-timeslot bipartite graph and find the maximum-weight matching | Matching algorithm produces correct pairs satisfying all hard constraints | Algorithm implemented; graph vertices are (request, timeslot) pairs; hard constraints (same subject, shared timeslot, different users, year range 0–4) enforced; greedy post-pass ensures per-user timeslot uniqueness | 6 |
| 10 Nov 2025 | Test matching algorithm with constraint scenarios | Test | Write unit tests covering subject mismatch, same-user pairing, year-range violations, and exam-board weight bonuses | All constraint tests pass; algorithm rejects invalid pairs and selects highest-weight valid pairs | `MatchingServiceTest`, `MatchingServiceDuplicateTest`, and `MatchingServiceTimeslotConflictTest` written and passing; one edge case (per-user timeslot conflict across two requests) required a fix to the greedy selection pass | 4 |
| 16 Nov 2025 | Implement scheduled automatic status transition | Develop | Create a `@Scheduled` task that compares MATCHED request timeslot end-times to the current time and transitions to DONE | Matched requests automatically become DONE after their session ends without admin action | `RequestStatusScheduler` implemented; uses `TimeService` to support a simulated clock for testing; scheduler disabled in the `test` Spring profile via `@Profile("!test")` | 3 |
| 22 Nov 2025 | Test scheduled status transition and simulated time | Test | Write integration tests that set a simulated time past a timeslot's end and verify the DONE transition | Scheduler correctly transitions MATCHED requests to DONE; does not affect PENDING requests | `RequestStatusSchedulerTest` and `TimeServiceTest` pass; `app.simulation.datetime` property confirmed working in `application-local.properties`; edge case of exactly-on-boundary time handled | 3 |
| 28 Nov 2025 | Implement admin dashboard and request management | Develop | Build `AdminController` with summary statistics, request-list filtering, and manual matching trigger | Admins can view all requests by status, trigger matching, and see count of new matches | Admin dashboard implemented with counts; status filter working via `RequestRepository` queries; match trigger returns the number of new matches; archive-old-requests action added | 4 |
| 04 Dec 2025 | Implement admin user management (reset, delete) | Implement | Add endpoints to reset a user's password and permanently delete a user account | Admins can reset any password and delete any user account safely | Password reset and delete endpoints implemented in `AdminController`; `UserService.deleteUser()` clears `matchedPartner` references in requests before deletion to prevent orphaned foreign keys | 3 |
| 10 Dec 2025 | Test validation rules and error-handling paths | Test | Manually and programmatically verify all validation rules (email domain, password length, year/exam-board combination, duplicate requests) | All invalid inputs rejected with appropriate error messages; valid inputs accepted | All six validation rules confirmed; registration with non-`@example.edu` email rejected; Year 12 student without A_LEVELS/IB rejected; duplicate active request rejected with inline error message on form | 3 |
| 16 Dec 2025 | Final integration: end-to-end flow and profile gating | Implement | Verify the complete student journey from registration to matched session, including profile-completion redirect | Full flow works: register → complete profile → create request → admin matches → status auto-updates to DONE | End-to-end flow confirmed; profile-completion gating in `DashboardController` and `RequestController` verified; `GlobalModelAdvice` provides all label maps to every view; subject seeding via `DataSeeder` confirmed on clean startup | 4 |

